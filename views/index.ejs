<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eighteen - The Habit Launchpad</title>
    <style>
        :root {
            --primary: #4361EE;
            --primary-dark: #3A0CA3;
            --accent: #F72585;
            --light: #F8F9FA;
            --dark: #212529;
            --success: #4CC9F0;
            --gray: #6C757D;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
        }
        
        .container {
            max-width: 500px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        .logo {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .logo h1 {
            font-size: 36px;
            color: var(--primary);
            margin-bottom: 5px;
        }
        
        .logo p {
            color: var(--gray);
            font-size: 16px;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            padding: 30px;
            margin-bottom: 30px;
        }
        
        .card-header {
            text-align: center;
            margin-bottom: 25px;
        }
        
        .card-header h2 {
            font-size: 24px;
            color: var(--dark);
            margin-bottom: 10px;
        }
        
        .card-header p {
            color: var(--gray);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #DDE2E5;
            border-radius: 6px;
            font-size: 16px;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        
        .form-control:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.25);
            outline: none;
        }
        
        .btn {
            display: block;
            width: 100%;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 14px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .btn:hover {
            background-color: var(--primary-dark);
        }
        
        .info-section {
            margin-top: 40px;
        }
        
        .info-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid var(--primary);
        }
        
        .info-card h3 {
            color: var(--primary);
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        /* Dashboard styles */
        .dashboard {
            margin-top: 50px;
        }
        
        .dashboard-title {
            text-align: center;
            margin-bottom: 20px;
            color: var(--dark);
        }
        
        .dashboard-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .dashboard-card h3 {
            color: var(--primary);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .streak-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 10px;
        }
        
        .streak-table th {
            text-align: left;
            padding: 10px 5px;
            font-weight: 600;
            color: var(--dark);
            border-bottom: 2px solid #eee;
        }
        
        .streak-table td {
            padding: 12px 5px;
            border-bottom: 1px solid #eee;
        }
        
        .streak-badge {
            display: inline-block;
            background-color: var(--primary);
            color: white;
            border-radius: 20px;
            padding: 4px 12px;
            font-weight: 600;
            font-size: 14px;
        }
        
        .streak-high {
            background-color: var(--success);
        }
        
        .streak-low {
            background-color: var(--accent);
        }
        
        .empty-state {
            text-align: center;
            padding: 30px 20px;
            color: var(--gray);
            font-style: italic;
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            color: var(--gray);
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo">
            <h1>Eighteen</h1>
            <p>The Habit Launchpad</p>
        </div>
        
        <div class="card">
            <div class="card-header">
                <h2>Commit to building a habit for 18 straight days, and invite a friend.</h2>
            </div>
            
            <form action="/challenge/create" method="POST">
                <div class="form-group">
                    <label for="habitName">What habit do you want to build?</label>
                    <input type="text" id="habitName" name="habitDescription" class="form-control" placeholder="e.g., Morning meditation, Daily reading" required>
                </div>
                
                <div class="form-group">
                    <label for="userEmail">Your email</label>
                    <input type="email" id="userEmail" name="initiatorEmail" class="form-control" placeholder="you@example.com" required>
                </div>
                
                <div class="form-group">
                    <label for="friendEmail">Accountability partner's email</label>
                    <input type="email" id="friendEmail" name="friendEmail" class="form-control" placeholder="friend@example.com" required>
                </div>
                
                <button type="submit" class="btn">Launch My 18-Day Challenge</button>
            </form>
        </div>
        
        <div class="info-section">
            <div class="info-card">
                <h3>Why 18?</h3>
                <p>Research shows this is the minimum time it takes for a new habit to really stick. Studies have found that the first 18 days are when your brain creates the strongest neural pathways. Once past this critical period, the habit becomes nearly automatic and much easier to maintain.</p>
            </div>
        </div>
        
        <% if (typeof hasStreaks !== 'undefined' && hasStreaks) { %>
        <div class="dashboard">
            <h2 class="dashboard-title">Active Challenges</h2>
            
            <% if (typeof activeStreaks !== 'undefined' && activeStreaks.length > 0) { %>
            <div class="dashboard-card">
                <h3>Current Challenges</h3>
                <table class="streak-table">
                    <thead>
                        <tr>
                            <th>Habit</th>
                            <th>Users</th>
                            <th>Days Completed</th>
                            <th>Start Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% activeStreaks.forEach(function(challenge) { %>
                        <tr>
                            <td><%= challenge.habitDescription %></td>
                            <td>
                                <div><%= challenge.initiatorEmail %></div>
                                <div><%= challenge.friendEmail %></div>
                            </td>
                            <td>
                                <span class="streak-badge <%= challenge.initiatorStreak >= 5 ? 'streak-high' : (challenge.initiatorStreak <= 1 ? 'streak-low' : '') %>">
                                    <%= challenge.initiatorStreak %> days
                                </span><br>
                                <span class="streak-badge <%= challenge.friendStreak >= 5 ? 'streak-high' : (challenge.friendStreak <= 1 ? 'streak-low' : '') %>">
                                    <%= challenge.friendStreak %> days
                                </span>
                            </td>
                            <td><%= challenge.startDate %></td>
                        </tr>
                        <% }); %>
                    </tbody>
                </table>
            </div>
            <% } %>
            
            <% if (typeof topStreaks !== 'undefined' && topStreaks.length > 0) { %>
            <div class="dashboard-card">
                <h3>Top Streaks</h3>
                <table class="streak-table">
                    <thead>
                        <tr>
                            <th>User</th>
                            <th>Habit</th>
                            <th>Current Streak</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% topStreaks.forEach(function(streak) { %>
                        <tr>
                            <td><%= streak.userEmail %></td>
                            <td><%= streak.habitDescription %></td>
                            <td>
                                <span class="streak-badge <%= streak.streak >= 10 ? 'streak-high' : '' %>">
                                    <%= streak.streak %> days
                                </span>
                            </td>
                        </tr>
                        <% }); %>
                    </tbody>
                </table>
            </div>
            <% } %>
        </div>
        <% } %>
        
        <div class="footer">
            <p>Based on habit formation research by Phillippa Lally et al., UCL</p>
        </div>
    </div>
</body>
</html>